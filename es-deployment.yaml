apiVersion: elasticsearch.k8s.elastic.co/v1
kind: Elasticsearch
metadata:
  name: quickstart
spec:
  version: 8.13.4
  nodeSets:
  - name: default
    count: 1
    config:
      node.store.allow_mmap: false

# kubectl apply -f es-deployment.yaml

# kubectl create -f https://download.elastic.co/downloads/eck/2.12.1/crds.yaml

# kubectl apply -f https://download.elastic.co/downloads/eck/2.12.1/operator.yaml

# kubectl get elasticsearch

# kubectl get pods --selector='elasticsearch.k8s.elastic.co/cluster-name=quickstart'

# kubectl get service quickstart-es-http

# PASSWORD=$(kubectl get secret quickstart-es-elastic-user -o go-template='{{.data.elastic | base64decode}}')

# curl -u "elastic:$PASSWORD" -k "https://quickstart-es-http:9200"

# kubectl port-forward service/quickstart-es-http 9200

# curl -u "elastic:$PASSWORD" -k "https://localhost:9200"